<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Propagation - Java Core</title>
  <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="topic-page">
  <header class="topic-header">
    <div class="topic-header-inner">
      <a href="../../index.html" class="topic-header-logo">Java Core</a>
      <nav class="topic-header-nav">
        <a href="../../index.html">Trang chủ</a>
      </nav>
    </div>
  </header>
  <div class="topic-layout">
    <nav class="topic-sidebar"><ul>
        <li><a href="../../index.html">Trang ch&#7911;</a>
        </li>
        <li><a href="../oop.html">OOP</a>
        </li>
        <li><a href="../collections/01-intro.html">Collections</a>
        </li>
        <li><a href="../io-nio/01-intro.html">I/O & NIO</a>
        </li>
        <li><a href="../concurrency/01-intro.html">Concurrency</a>
        </li>
        <li><a href="../jvm-memory/01-architecture.html">JVM & Memory</a>
        </li>
        <li><a href="../exception/01-hierarchy.html" class="topic-sidebar-link--active">Exception</a>
        <ul class="topic-sub-nav">
          <li><a href="../exception/01-hierarchy.html">Hierarchy</a></li>
          <li><a href="../exception/02-keywords.html">Keywords</a></li>
          <li><a href="../exception/03-try-with-resources.html">Try-with-resources</a></li>
          <li><a href="../exception/04-propagation.html" class="topic-sidebar-link--active">Propagation</a></li>
          <li><a href="../exception/05-jvm-cost.html">JVM Cost</a></li>
          <li><a href="../exception/06-best-practices.html">Best Practices</a></li>
        </ul>
        </li>
        <li><a href="../generics/01-intro.html">Generics</a>
        </li>
        <li><a href="../lambda/01-intro.html">Lambda & Stream</a>
        </li>
</ul></nav>

    <main class="main-content topic-main">
      <div class="breadcrumb"><a href="../../index.html">Trang chủ</a> / Propagation</div>
      <article class="topic-content">
        <section>
  <h3>Exception Propagation</h3>
  <p>Nếu Exception xảy ra trong method mà không được catch, nó được đẩy ngược lên (pop) khỏi Stack Frame của method đó và chuyển về method gọi nó. Quá trình tiếp tục cho đến khi gặp catch phù hợp hoặc lên <code>main()</code>. Nếu không ai xử lý — JVM in stack trace và dừng Thread đó.</p>

  <h4>Stack Unwinding</h4>
  <p>JVM "unwind" Stack: pop các Frame cho đến khi tìm thấy handler. Mỗi Frame bị pop — local variable mất, nhưng Exception object vẫn giữ trong Heap. Stack trace ghi lại chuỗi Frame (call stack) tại thời điểm throw.</p>

  <h4>Chained Exception</h4>
  <p><code>throw new IOException("wrap", cause)</code> — Exception gốc được wrap. <code>getCause()</code> lấy cause. Giữ nguyên nguyên nhân khi rethrow — giúp debug.</p>

  <pre><code>void a() { b(); }
void b() { c(); }
void c() {
  throw new RuntimeException("error");
}
// Propagation: c → b → a → main → JVM in stack trace</code></pre>

  <section class="pro-con">
    <h4>Rethrow</h4>
    <div class="pro-con-list">
      <div class="pro-con-item pro-con-item--pro">
        <strong>Nên:</strong> Catch, log, rethrow với cause: <code>throw new ServiceException("failed", e)</code> — giữ stack trace gốc.
      </div>
      <div class="pro-con-item pro-con-item--con">
        <strong>Tránh:</strong> <code>throw new Exception(e.getMessage())</code> — mất cause, mất stack trace gốc.
      </div>
    </div>
  </section>
</section>

      </article>
    </main>
  </div>
  <footer class="topic-footer">
    <p>Xây dựng bằng Java 17+ · Không dùng framework · Pure NIO</p>
  </footer>
</body>
</html>
