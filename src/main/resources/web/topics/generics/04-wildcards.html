<section>
  <h3>Wildcards — ?</h3>

  <h4>Kỹ thuật</h4>
  <p>Wildcard <code>?</code> biểu thị "kiểu không xác định". Ba dạng: <code>?</code> (unbounded), <code>? extends T</code> (upper), <code>? super T</code> (lower). <strong>extends</strong>: read-only, lấy ra T. <strong>super</strong>: write-only, thêm T. <strong>Unbounded ?</strong>: chỉ đọc ra Object, không ghi (trừ null). Wildcard capture: dùng helper method với type parameter khi cần thao tác trên List&lt;?&gt;.</p>

  <h4>? extends T (Upper bounded)</h4>
  <p><code>List&lt;? extends Number&gt;</code> — có thể là List&lt;Integer&gt;, List&lt;Double&gt;... Chỉ đọc (read): <code>Number n = list.get(0)</code> OK. Không ghi: <code>list.add(1)</code> — lỗi, vì không biết list thực tế là List&lt;Integer&gt; hay List&lt;Double&gt;.</p>

  <h4>? super T (Lower bounded)</h4>
  <p><code>List&lt;? super Integer&gt;</code> — có thể là List&lt;Integer&gt;, List&lt;Number&gt;, List&lt;Object&gt;. Chỉ ghi (write): <code>list.add(1)</code> OK. Đọc ra Object: <code>Object o = list.get(0)</code> — không biết kiểu cụ thể.</p>

  <h4>? (Unbounded wildcard)</h4>
  <p><code>List&lt;?&gt;</code> — không biết kiểu. Chỉ đọc ra Object; không ghi (trừ null). Dùng khi method không quan tâm type: <code>int size(List&lt;?&gt; list)</code>. Tương đương <code>List&lt;? extends Object&gt;</code>.</p>
  <h4>Ví dụ</h4>
  <pre><code>void printSize(List&lt;?&gt; list) {
  System.out.println(list.size());  // OK
  // list.add("x");  // Error
  list.add(null);    // OK — null là mọi type
}</code></pre>

  <h4>Kỹ thuật — Wildcard capture</h4>
  <p>Khi cần "capture" wildcard thành type cụ thể — dùng helper method với type parameter. <code>void swap(List&lt;?&gt; list, int i, int j)</code> — không thể <code>list.set(i, list.get(j))</code> vì get trả về Object. Helper: <code>private &lt;E&gt; void swapHelper(List&lt;E&gt; list, int i, int j)</code>.</p>
  <pre><code>// Capture helper
public static void swap(List&lt;?&gt; list, int i, int j) {
  swapHelper(list, i, j);
}
private static &lt;E&gt; void swapHelper(List&lt;E&gt; list, int i, int j) {
  E tmp = list.get(i);
  list.set(i, list.get(j));
  list.set(j, tmp);
}</code></pre>

  <h4>Ví dụ — extends và super</h4>
  <pre><code>// extends — producer, read
void printNumbers(List&lt;? extends Number&gt; list) {
  for (Number n : list) {
    System.out.println(n);
  }
  // list.add(1);  // Compile error!
}

// super — consumer, write
void addIntegers(List&lt;? super Integer&gt; list) {
  list.add(1);
  list.add(2);
  // Integer i = list.get(0);  // Error — chỉ biết Object
}</code></pre>

  <table class="comparison-table">
    <caption>Wildcard — read vs write</caption>
    <thead>
      <tr>
        <th>Wildcard</th>
        <th>Read</th>
        <th>Write</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>? extends T</code></td>
        <td>OK — lấy ra T</td>
        <td>Không (trừ null)</td>
      </tr>
      <tr>
        <td><code>? super T</code></td>
        <td>Chỉ Object</td>
        <td>OK — thêm T</td>
      </tr>
      <tr>
        <td><code>?</code></td>
        <td>Object</td>
        <td>Không (trừ null)</td>
      </tr>
    </tbody>
  </table>
</section>
